<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Driven Learning Style Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #50E3C2;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f0f4f8, #e8ebf2);
            background-size: 400% 400%;
            animation: gradient-animation 15s ease infinite;
        }

        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1100px;
            margin: auto;
            padding: 2rem;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container min-h-screen flex flex-col justify-center items-center">
        <header data-aos="fade-down" class="text-center mb-12">
            <h1 class="text-5xl font-extrabold text-blue-600 mb-2">AI-Driven Learning Style Predictor ðŸ§ </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                Enter the student's behavioral metrics to get a detailed, data-backed prediction based on the <strong class="font-bold">Felder-Silverman Learning Style Model</strong>.
            </p>
        </header>

        <div data-aos="fade-up" class="w-full bg-white p-10 rounded-xl shadow-2xl">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="flex flex-col">
                    <label for="T_image" class="text-sm font-semibold text-gray-700 mb-1">Time on Images (min)</label>
                    <input type="number" id="T_image" value="5.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_video" class="text-sm font-semibold text-gray-700 mb-1">Time on Videos (min)</label>
                    <input type="number" id="T_video" value="12.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_read" class="text-sm font-semibold text-gray-700 mb-1">Time Reading (min)</label>
                    <input type="number" id="T_read" value="10.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_audio" class="text-sm font-semibold text-gray-700 mb-1">Time on Audio (min)</label>
                    <input type="number" id="T_audio" value="8.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_hierarchies" class="text-sm font-semibold text-gray-700 mb-1">Time on Hierarchies (min)</label>
                    <input type="number" id="T_hierarchies" value="6.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_powerpoint" class="text-sm font-semibold text-gray-700 mb-1">Time on PowerPoints (min)</label>
                    <input type="number" id="T_powerpoint" value="5.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_concrete" class="text-sm font-semibold text-gray-700 mb-1">Time on Concrete Examples (min)</label>
                    <input type="number" id="T_concrete" value="3.0" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_result" class="text-sm font-semibold text-gray-700 mb-1">Time on Results/Outcomes (min)</label>
                    <input type="number" id="T_result" value="5.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="N_standard_questions_correct" class="text-sm font-semibold text-gray-700 mb-1">Correct Standard Questions</label>
                    <input type="number" id="N_standard_questions_correct" value="27.0" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="N_msgs_posted" class="text-sm font-semibold text-gray-700 mb-1">Messages Posted</label>
                    <input type="number" id="N_msgs_posted" value="106.0" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_solve_excercise" class="text-sm font-semibold text-gray-700 mb-1">Time Solving Exercises (min)</label>
                    <input type="number" id="T_solve_excercise" value="10.0" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="N_group_discussions" class="text-sm font-semibold text-gray-700 mb-1">Group Discussions</label>
                    <input type="number" id="N_group_discussions" value="8.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="Skipped_los" class="text-sm font-semibold text-gray-700 mb-1">Skipped Learning Objects</label>
                    <input type="number" id="Skipped_los" value="3.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="N_next_button_used" class="text-sm font-semibold text-gray-700 mb-1">Next Button Clicks</label>
                    <input type="number" id="N_next_button_used" value="232.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="T_spent_in_session" class="text-sm font-semibold text-gray-700 mb-1">Total Time in Session (min)</label>
                    <input type="number" id="T_spent_in_session" value="20.0" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="N_questions_on_details" class="text-sm font-semibold text-gray-700 mb-1">Questions on Details</label>
                    <input type="number" id="N_questions_on_details" value="77.0" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
                <div class="flex flex-col">
                    <label for="N_questions_on_outlines" class="text-sm font-semibold text-gray-700 mb-1">Questions on Outlines</label>
                    <input type="number" id="N_questions_on_outlines" value="56.5" class="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                </div>
            </div>
            
            <button onclick="predict()" class="mt-8 w-full py-4 text-white font-bold text-lg bg-blue-600 hover:bg-blue-700 rounded-lg transition-all duration-300 transform hover:scale-105">
                Predict Learning Style
            </button>
        </div>

        <div id="predictionResult" class="mt-12 w-full max-w-4xl opacity-0 transition-opacity duration-500">
            </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 800,
            once: true,
        });

        const descriptions = {
            'Visual': "Visual learners prefer pictures, diagrams, and flow charts. They learn best from visual representations of information.",
            'Verbal': "Verbal learners prefer written and spoken explanations.",
            'Sensing': "Sensing learners prefer concrete facts, data, and hands-on activities. They are practical and methodical.",
            'Intuitive': "Intuitive learners prefer abstract concepts, theories, and patterns. They are innovative and work quickly.",
            'Active': "Active learners prefer to learn by doing and working in groups. They learn best through experimentation and discussion.",
            'Reflective': "Reflective learners prefer to think through things and work alone. They prefer to observe and consider before acting.",
            'Sequential': "Sequential learners learn in linear, logical steps. They follow a step-by-step path to understanding.",
            'Global': "Global learners prefer to learn in large chunks and grasp the big picture first. They can make connections between disparate ideas.",
        };

        const dimensionTitles = {
            'visual_verbal': 'Information Modality',
            'sensing_intuitive': 'Information Perception',
            'active_reflective': 'Information Processing',
            'sequential_global': 'Information Organization'
        };

        const styleColors = {
            'Visual': 'bg-green-100 text-green-700 border-green-500',
            'Verbal': 'bg-purple-100 text-purple-700 border-purple-500',
            'Sensing': 'bg-yellow-100 text-yellow-700 border-yellow-500',
            'Intuitive': 'bg-indigo-100 text-indigo-700 border-indigo-500',
            'Active': 'bg-blue-100 text-blue-700 border-blue-500',
            'Reflective': 'bg-red-100 text-red-700 border-red-500',
            'Sequential': 'bg-teal-100 text-teal-700 border-teal-500',
            'Global': 'bg-pink-100 text-pink-700 border-pink-500',
        };

        async function predict() {
            const data = {
                T_image: parseFloat(document.getElementById('T_image').value),
                T_video: parseFloat(document.getElementById('T_video').value),
                T_read: parseFloat(document.getElementById('T_read').value),
                T_audio: parseFloat(document.getElementById('T_audio').value),
                T_hierarchies: parseFloat(document.getElementById('T_hierarchies').value),
                T_powerpoint: parseFloat(document.getElementById('T_powerpoint').value),
                T_concrete: parseFloat(document.getElementById('T_concrete').value),
                T_result: parseFloat(document.getElementById('T_result').value),
                N_standard_questions_correct: parseFloat(document.getElementById('N_standard_questions_correct').value),
                N_msgs_posted: parseFloat(document.getElementById('N_msgs_posted').value),
                T_solve_excercise: parseFloat(document.getElementById('T_solve_excercise').value),
                N_group_discussions: parseFloat(document.getElementById('N_group_discussions').value),
                Skipped_los: parseFloat(document.getElementById('Skipped_los').value),
                N_next_button_used: parseFloat(document.getElementById('N_next_button_used').value),
                T_spent_in_session: parseFloat(document.getElementById('T_spent_in_session').value),
                N_questions_on_details: parseFloat(document.getElementById('N_questions_on_details').value),
                N_questions_on_outlines: parseFloat(document.getElementById('N_questions_on_outlines').value)
            };

            const resultDiv = document.getElementById('predictionResult');
            resultDiv.innerHTML = `<p class="text-center text-xl font-semibold text-blue-500">Predicting...</p>`;
            resultDiv.classList.remove('opacity-100');
            resultDiv.classList.add('opacity-0');

            try {
                const response = await fetch('http://127.0.0.1:8000/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                
                let htmlOutput = `
                    <h2 class="text-center font-bold mb-6 text-2xl">Predicted Learning Profile</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                `;
                
                for (const dimension in result) {
                    const prediction = result[dimension];
                    const badgeClass = styleColors[prediction.style] || 'bg-gray-200 text-gray-800 border-gray-500';

                    const reasonsHtml = (prediction && prediction.reasons && prediction.reasons.length > 0)
                        ? `<h4 class="font-semibold text-md text-gray-700 mt-4 mb-2">Top Factors:</h4><ul class="list-disc list-inside text-sm text-gray-600 space-y-1">${prediction.reasons.map(reason => `<li>${reason}</li>`).join('')}</ul>`
                        : '';

                    htmlOutput += `
                        <div class="bg-white p-6 rounded-lg shadow-md border-t-4 ${badgeClass.split(' ')[2]}" data-aos="fade-up">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-lg font-semibold text-gray-800">${dimensionTitles[dimension]}</h3>
                                <span class="badge ${badgeClass}">${prediction.style} (${prediction.percentage}%)</span>
                            </div>
                            <p class="text-sm text-gray-600">${descriptions[prediction.style]}</p>
                            ${reasonsHtml}
                        </div>
                    `;
                }

                htmlOutput += `</div>`;
                
                const finalResultDiv = document.getElementById('predictionResult');
                finalResultDiv.innerHTML = htmlOutput;
                finalResultDiv.classList.remove('opacity-0');
                finalResultDiv.classList.add('opacity-100');
                
            } catch (error) {
                const finalResultDiv = document.getElementById('predictionResult');
                finalResultDiv.innerHTML = `<p class="text-red-500 text-center font-semibold">Error: ${error.message}. Please ensure the backend is running.</p>`;
                finalResultDiv.classList.remove('opacity-0');
                finalResultDiv.classList.add('opacity-100');
                console.error('Error:', error);
            }
        }
    </script>
</body>
</html>